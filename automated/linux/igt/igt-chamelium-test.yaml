metadata:
    format: Lava-Test Test Definition 1.0
    name: igt-chamelium-test
    description: "Run igt-gpu-tools with Chamelium for pixel formats testing"
    maintainer:
        - arthur.she@linaro.org
    os:
        - debian
        - ubuntu
        - OE
    scope:
        - functional
    devices:
        - dragonboard-410c
        - beagleboard X15

params:
    CHAMELIUM_IP: "192.168.29.200"
    HDMI_DEV_NAME: "HDMI-A-1"
    IGT_DIR: "/igt-gpu-tools"
    TEST_LIST: "tests/vc4_ci/vc4-chamelium.testlist"

run:
    steps:
        - cd ./automated/linux/igt
        - git config --global http.sslverify false
        - ./igt-chamelium-test.sh -c ${CHAMELIUM_IP} -h ${HDMI_DEV_NAME} -d ${IGT_DIR} -t ${TEST_LIST}
        - ../../utils/send-to-lava.sh result.log
